extends layout

block styles
  link(rel="stylesheet" type="text/css" href="/vendor/datatables/datatables.bundle.css")

block content
  .container1-page
    // breadcrumb
    .bread-crumb.bgwhite.flex-w.p-l-52.p-r-15.p-t-30.p-l-15-sm
      a.s-text16(href="/")
        | Home
        i.fa.fa-angle-right.m-l-8.m-r-9(aria-hidden="true")
      span.s-text17(href="/orders")
        | Orders

    // Content page
    section.bgwhite.p-t-55.p-b-65
      .container
        .flex-sb-m.flex-w.p-b-35
          .flex-w
            .bo4.of-hidden.w-size12.m-t-5.m-b-5.m-r-10
              select.custom-select.border-0.s-text7.w-100(name="sorting")
                option.text-secondary.s-text7 Price
                option.text-secondary.s-text7 $0.00 - $50.00
                option.text-secondary.s-text7 $50.00 - $100.00
                option.text-secondary.s-text7 $100.00 - $150.00
                option.text-secondary.s-text7 $150.00 - $200.00
                option.text-secondary.s-text7 $200.00+
            .bo4.of-hidden.w-size12.m-t-5.m-b-5.m-r-10
              input.form-control.border-0.s-text7.w-100(type="search" name="search" placeholder="Search")
          span.s-text8.p-t-5.p-b-5
            | Showing #{orders.length}â€“#{orders.length < 12 ? orders.length : 12} of #{totalDocs} results
        // Orders 
        .table-responsive
          table.table.table-striped.table-hover#m_table_1
            thead.bg-dark
              tr.s-text15.text-white
                th 
                  .custom-control.custom-checkbox
                      input.input.custom-control-input(type="checkbox" id="all")
                      label.custom-control-label(for="all")
                th Email
                th Date
                th Items Count
                th Discount
                th Tax
                th Subtotal
                th Total
                th.text-center Actions
            tbody
              each order in orders
                tr.s-text15(id=order._id)
                  td.d-flex.align-items-center(style="height: 80px")
                    .custom-control.custom-checkbox
                      input.input.custom-control-input(type="checkbox" id="check_"+order._id)
                      label.custom-control-label(for="check_"+order._id)
                  td(style="line-height: 60px") #{order.user.username}
                  td(style="line-height: 60px") #{new Date(order.createdAt).toUTCString()}
                  td(style="line-height: 60px") #{order.items_count}
                  td(style="line-height: 60px") $#{order.discount}
                  td(style="line-height: 60px") $#{order.tax}
                  td(style="line-height: 60px") $#{order.subtotal}
                  td(style="line-height: 60px") $#{order.total}
                  td.d-flex.justify-content-center.align-items-center(style="height: 80px")
                    .dropdown
                      button.btn.btn-outline-secondary.rounded-circle.p-0.d-flex.align-items-center.justify-content-center(data-toggle='dropdown' style="width: 25px; height: 25px" aria-haspopup="true" aria-expanded="false")
                        i.fas.fa-ellipsis-v
                      .dropdown-menu
                        ul.nav
                          li.nav-item.border-bottom.w-100
                            a.nav-link.text-primary.py-1(href='#') 
                              i.fas.fa-file-alt.fa-fw
                              small View Invoice
                          li.nav-item.w-100
                            a.nav-link.text-danger.py-1(href='#') 
                              i.fas.fa-trash.fa-fw 
                              small Delete Order
        // Pagination
        .pagination.flex-m.flex-w.p-t-26.justify-content-center
          each _, i in Array(totalPages)
            if (parseInt(i)+1 == currentPage)
              a.item-pagination.flex-c-m.trans-0-4.active-pagination(href="/products?view=table&page="+(parseInt(i)+1)) #{i+1}
            else
              a.item-pagination.flex-c-m.trans-0-4(href="/products?view=table&page="+(parseInt(i)+1)) #{i+1}

block scripts
  if (message)
    script(type="text/javascript").
        swal("Success", "#{message}", "success");

  // ===============================================================================================
  script(src="/js/products.js")
  // ===============================================================================================

  //script(src="/vendor/base/scripts.bundle.js")
  // ===============================================================================================
  //script(src="/vendor/datatables/datatables.bundle.js")
  //script(src="/vendor/datatables/buttons.js")
